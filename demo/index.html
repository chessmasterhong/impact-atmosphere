<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
        <title>Impact Atmospheric System Plugin Demo</title>

        <style>
            #container { padding-top: 10px; white-space: nowrap;}
            #canvas { float: left; margin-right: 10px; }
            input { margin-left: 10px; }
            @media print, screen and (max-width: 1160px) {
                #canvas { float: none; margin: 0;}
            }
        </style>

        <script src="lib/impact/impact.js"></script>
        <script src="lib/game/main.js"></script>
    </head>
    <body>
        <h1>Impact Atmospheric System Plugin Demo</h1>
        <p>A plugin for the <a href="http://impactjs.com">Impact game engine</a> that simulates an atmospheric weather system, day/night cycles and seasonal cycles based on configurable date, time, and geographical coordinates.</p>
        <p><strong>Source code: <a href="https://github.com/chessmasterhong/impact-atmosphere">https://github.com/chessmasterhong/impact-atmosphere</a></strong></p>

        <div id="container">
            <canvas id="canvas"></canvas>

            <p><strong>Instructions: Select a radio option below to see the respective changes to the plugin in the canvas.</strong></p>

            <p id="ts">Timescale: </p>
            <p id="ur">Update Rate: </p>
            <p id="wc">Weather Condition: </p>
            <p id="mp">Maximum Particle Count: </p>

            <small>
                Note 1: Bracketed radio labels denotes plugin's default values.<br>
                Note 2: To show/hide debug messages, left click the canvas.<br>
                Note 3: If you <em>really</em> want to try the fog weather condition, I would suggest running it on a beefy machine.<br>
                Note 4: This plugin is under development. See <a href="https://github.com/chessmasterhong/impact-atmosphere#bugs-and-known-issues">here</a> for a list of known bugs and issues.
            </small>
        </div>

        <script>
            window.onload = function() {
                var i, s = [],
                    ts_sel = 600, ts = [0.1, 0.5, 1, 60, 600, 3600, 86400, 2592000],
                    ur_sel = 0.5, ur = [0.1, 0.5, 1, 10, 60],
                    wc_sel =   0, wc = [{v: 0, t: 'Clear'}, {v: 1, t: 'Rain'}, {v: 2, t: 'Snow'}, {v: 3, t: 'Fog (EXPERIMENTAL!!)'}],
                    mp_sel = 100, mp = [1, 10, 50, 100, 200, 500];

                for(i = 0; i < ts.length; i++) {
                    document.getElementById('ts').innerHTML += "<input type='radio' name='ts' id='ts_" + i + "' onClick='updateTimescale(this.value)' value='" + ts[i] + "'>" + ts[i] + "x ";
                    if(ts[i] === ts_sel) s.push('ts_' + i);
                }
                for(i = 0; i < ur.length; i++) {
                    document.getElementById('ur').innerHTML += "<input type='radio' name='ur' id='ur_" + i + "' onClick='updateUpdateRate(this.value)' value='" + ur[i] + "'>" + ur[i] + (ur[i] <= 1 ? " second " : " seconds ");
                    if(ur[i] === ur_sel) s.push('ur_' + i);
                }
                for(i = 0; i < wc.length; i++) {
                    document.getElementById('wc').innerHTML += "<input type='radio' name='wc' id='wc_" + i + "' onClick='updateWeather(this.value)' value='" + wc[i].v + "'>" + wc[i].t + " ";
                    if(wc[i].v === wc_sel) s.push('wc_' + i);
                }
                for(i = 0; i < mp.length; i++) {
                    document.getElementById('mp').innerHTML += "<input type='radio' name='mp' id='mp_" + i + "' onClick='updateMaxParticles(this.value)' value='" + mp[i] + "'>" + mp[i] + " ";
                    if(mp[i] === mp_sel) s.push('mp_' + i);
                }

                for(i = 0; i < s.length; i++)
                    document.getElementById(s[i]).checked = true;
            }

            function updateTimescale(v) { ig.game.atmosphere.timescale = parseFloat(v); };
            function updateUpdateRate(v) { ig.game.atmosphere.updateUpdateRate(parseFloat(v)); };
            function updateWeather(v) { ig.game.atmosphere.condition = parseInt(v); };
            function updateMaxParticles(v) { ig.game.atmosphere.particles.max = parseInt(v); };
        </script>
    </body>
</html>
